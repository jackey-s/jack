/** * Created by jack on 2017/6/22. */$(function(){    $(function () {        var pageid=getQueryString("pageid")|| 1;        getMoneyctrl(pageid);        function getMoneyctrl(pageid){            $.ajax({                url:"http://182.254.146.100:3000/api/getmoneyctrl",                data:{                    "pageid":pageid                },                success: function (data) {                    var html=template("moneyTmp",data);                    $(".reommen-in").html(html);                    var page=Math.ceil(data.totalCount/data.pagesize);                    //console.log(page);                    var pageli="";                    for(var i=0;i<page;i++){                        var dz="moneyctrl.html?pageid="+(i+1);                        pageli+="<li><a href="+dz+">第"+(i+1)+"/"+page+"页</a></li>";                    }                    console.log(pageli);                    $("#dropdownMenu1").html("第"+pageid+"页");                    $("#dropdownMenu1").append ('<span class="caret"></span>');                    var prevdz,nextdz;                    prevdz="moneyctrl.html?pageid="+(pageid-1);                    nextdz="moneyctrl.html?pageid="+(parseInt(pageid)+1);                    if(pageid<=1){                        prevdz="moneyctrl.html?pageid="+1;                        nextdz="moneyctrl.html?pageid="+2;                    }else if(pageid>=page){                        prevdz="moneyctrl.html?pageid="+(pageid-1);                        nextdz="moneyctrl.html?pageid="+page;                    }                    $(".prev-dz").attr("href",prevdz);                    $(".next-dz").attr("href",nextdz);                    $(".dropdown-menu").html(pageli);                    var html=template("moneyTmp",data);                    $(".product-in").html(html);                }            })        }    })    function getQueryString(name) {        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");        var r = location.search.substr(1).match(reg);        if (r != null) return unescape(decodeURI(r[2])); return null;    }})